#if ($ctx.error)
  $util.error($ctx.error.message, $ctx.error.type)
#end

#set ($user = $ctx.prev.result)
#set ($blockerAt = $ctx.result.blockedAt)  ## perspectives swap
#if ($util.isNull($ctx.result))
  #set ($blockerStatus = 'NOT_BLOCKING')
#else
  #set ($blockerStatus = 'BLOCKING')
#end

$util.qr($user.put('blockerAt', $blockerAt))
$util.qr($user.put('blockerStatus', $blockerStatus))
$util.toJson($user)
