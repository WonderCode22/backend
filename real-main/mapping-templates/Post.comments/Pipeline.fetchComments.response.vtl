#if ($ctx.error)
  $util.error($ctx.error.message, $ctx.error.type)
#end

#set ($userIds = [])
#foreach ($item in $ctx.result.items)
  $util.qr($userIds.add($item.userId))
#end

$util.qr($ctx.stash.put('comments', $ctx.result.items))

$util.toJson({
  'nextToken': $ctx.result.nextToken,
  'userIds': $userIds
})
